{% extends 'base.html' %}{% block title %}Buses{% endblock %}{% block content %}
<form class='row g-2 mb-3'>
<div class='col-auto'><input class='form-control' type=date name=date value='{{ request.args.get('date','') }}'></div>
<div class='col-auto'><button class='btn btn-secondary'>Filter</button></div>
</form>
<table class='table table-hover'><thead><tr><th>Date</th><th>Time</th><th>Capacity</th><th>Left</th><th></th></tr></thead><tbody>
{% for bus in buses %}
<tr><td>{{ bus.date }}</td><td>{{ '%02d:%02d'|format(bus.time.hour, bus.time.minute) }}</td><td>{{ bus.capacity }}</td><td>{{ bus.seats_left }}</td>
<td>
  {% if current_user.role in ['verifier','admin'] %}
    <a class='btn btn-sm btn-warning' href='/manifest/{{ bus.id }}'>Manifest</a>
  {% else %}
    <a class='btn btn-sm btn-outline-primary' href='/buses/{{ bus.id }}'>View</a>
  {% endif %}
</td></tr>
{% endfor %}
</tbody></table>
{% endblock %}